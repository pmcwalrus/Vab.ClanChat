# Vab.ClanChat

Решение тестового задания по созданию кланового чата. Решение состоит из сервиса бэкенда и
простого веб клиента. Для обмена данными между клиентом и сервером используется SignalR, 
в качестве базы данных - Postgresql. Для синхронизации данных в SignalR между инстансами
используется Redis. Для балансировки используется Nginx. База данных для инстансов общая.

### Запуск

Для запуска сервисов необходимо в корневом разделе выполнить команду.

``docker compose up``

Для запуска должны быть свободны следующие порты: 5000, 5001, 5100, 5200, 6379, 5432.
Если какие-то из них заняты, то можете отредактировать docker-compose.yaml</br>
По-умолчанию клиент доступен по адресу ``http://localhost:5200``.</br>
При первоначальном запуске в базу данных будут добавлены следующие тестовые данные:</br>

Кланы: King Gizzard, Lizard Wizard и Sigma Males</br>
Пользователи: User1-User39. При этом пользователи User10-User19 являются членами клана
King Gizzard, User20-29 - членами клана Lizard Wizard. Остальные полльзователи не являются
членами никакого клана изначально, а клан Sigma Males также не содержит пользователей.</br>
Сообщения: 200 сообщений типа "Default message #{1-200}". Все четные сообщения принадлежат 
клану King Gizzard, а нечетные - Lizard Wizard.</br>
Если потребуется отредактировать изначальные данные, можно воспользоваться сваггером сервисов:
``http://localhost:5000/swagger/index.html``, ``http://localhost:5001/swagger/index.html`` или через балансировщик
``http://localhost:5100/swagger/index.html``

### Использование

Для подключения к чату необходимо указать имя клана и пользователя и нажать кнопку Join.
Авторизации в сервисе как таковой нет, но сообщения в клане могут читать только его члены,
т.е. для успешного подключения необходимо, чтобы пользователь состоял в клане. Одновременно 
можно состоять только в одном клане.</br>
После подключения будет доступна возможность отправлять и читать сообщения в клане. При потере 
потере соединения с SignalR, клиент будет стараться переподключиться к той группе, членом кооторой 
он являлся.




